<mat-drawer-container class="example-container" autosize>
  <mat-drawer #drawer class="example-sidenav" mode="side">
   
    <app-sidebar/>

  </mat-drawer>

  <div class="example-sidenav-content overflow-hidden">
    <button type="button" class="toggle-button" mat-button (click)="drawer.toggle()"></button>

    <div class="content !h-full">
      <ng-container *ngIf="board$ | async as board" class="!h-full">
        <div class="w-full">
          <mat-expansion-panel  (click)="controlExpland()">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h1 class="pt-4 pl-3 !font-semibold !text-2xl !text-stone-800">{{board.name}}</h1>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="text-content">
              <div class="!text-black text-xl !font-semibold">
                Description
              </div>
              <div class="!text-base !text-gray-800 overflow-auto break-words">
                {{board.description}}
              </div>
              <div class="my-3">
                <mat-divider></mat-divider>
              </div>
              <div class="!text-black text-xl !font-semibold">
                Created at
              </div>
              <p class="!text-base !text-gray-800 overflow-auto break-words">{{board.createdAt | date: 'dd/MM/yyyy'}}</p>
            </div>
          </mat-expansion-panel>
        </div>
  
        <div class="working-area h-full" [ngClass]="{'expanded-working-area' : isExpaned | async}">
          <div cdkDropListGroup class="flex gap-10 !pl-2 overflow-x-scroll board-container">
            <div class="rounded-lg min-h-32 bg-slate-50 min-w-56 board-column overflow-y-auto" [ngClass]="{'expanded-column' : isExpaned | async}" cdkDropList *ngFor="let column of (board$ | async)?.columns" [cdkDropListData]="column.tasks" (cdkDropListDropped)="dropTest($event)">
              
              <h4 class="text-slate-600 pl-3 pt-1 !text-xl !font-bold break-words overflow-auto">{{ column.name }}</h4>

              <div class="my-1">
                <mat-divider></mat-divider>
              </div>
              
              <div cdkDrag *ngFor="let task of column.tasks" [cdkDragData]="task">
                {{ task.name }} 
                <div *cdkDragPlaceholder></div>
              </div>
            </div>

            <div class="h-auto pr-2">
              <mat-expansion-panel class="mat-expansion-panel-2">
                <mat-expansion-panel-header class="mat-expansion-panel-header-2">
                  <mat-panel-title>
                    <h1 class="pt-4 pl-3 font-semibold !text-lg text-stone-800">Add Column</h1>
                  </mat-panel-title>
                </mat-expansion-panel-header>
                
                <app-add-col-form (columnAdded)="loadBoard()"></app-add-col-form>
  
              </mat-expansion-panel>    
            </div>
            
          </div>

  
        </div>

        <ng-template #loading>
          <p>Loading...</p>
        </ng-template>

        <div *ngIf="(board$ | async) === null">
          <p>No board found or error occurred.</p>
        </div>

      </ng-container>
    </div>
  </div>
</mat-drawer-container>